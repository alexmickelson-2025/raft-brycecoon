@page "/"
@rendermode InteractiveServer
@using DistributedTDDProject1

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

<button @onclick="startSimulation">start Simulation</button>

@foreach (var node in nodes ?? new List<SimulationNode>())
{
    <div>
        @node.InnerNode.id
    </div>
}

@code {
    List<SimulationNode>? nodes;

    void startSimulation() {
        var node1 = new Node();
        var node2 = new Node();
        var node3 = new Node();

        var SimulationNode1 = new SimulationNode(node1);
        var SimulationNode2 = new SimulationNode(node2);
        var SimulationNode3 = new SimulationNode(node3);

        node1.neighbors = [SimulationNode2, SimulationNode3];
        node2.neighbors = [SimulationNode1, SimulationNode3];
        node3.neighbors = [SimulationNode1, SimulationNode2];

        nodes = new List<SimulationNode> { SimulationNode1, SimulationNode2, SimulationNode3 };
    }
}
